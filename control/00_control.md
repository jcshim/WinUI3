
# β… 5λ¶„ μ΄ν•΄ μ”μ•½ β€” C++/WinRT ν…ν”λ¦Ώ XAML μ»¨νΈλ΅¤ λ§λ“¤κΈ°

WinUI 3μ—μ„ **ν…ν”λ¦Ώ μ»¨νΈλ΅¤(Template Control)** μ΄λ€

> **Control ν΄λμ¤λ¥Ό μƒμ†**ν•μ—¬, **XAML ν…ν”λ¦Ώλ΅ μ™Έν•(UI)μ„ μ •μν•κ³ **,
> C++ μ½”λ“λ΅ **λ™μ‘κ³Ό μ†μ„±**μ„ κµ¬ν„ν•λ” μ‚¬μ©μ μ»¨νΈλ΅¤μ…λ‹λ‹¤.

μ¦‰, WinUIμ μμ²΄ Button κ°™μ€ κ²ƒκ³Ό **μ™„μ „ν λ™μΌν• λ°©μ‹μΌλ΅ λ™μ‘ν•λ” μμ²΄ μ»¨νΈλ΅¤**μ„ λ§λ“λ” κ³Όμ •μ…λ‹λ‹¤.

---

# 1. β” ν•„μ μ΅°κ±΄

1. **Visual Studio + C++/WinRT ν™•μ¥(VSIX)** μ„¤μΉ
2. WinUI 3 ν”„λ΅μ νΈ(Blank App) μ¤€λΉ„
3. μμ  ν”„λ΅μ νΈ μ΄λ¦„: **BgLabelControlApp**

---

# 2. β” μ»¨νΈλ΅¤ μƒμ„± νλ¦„ μ”μ•½ (μ „μ²΄ κ³Όμ • κ°λ…)

### β‘  **ν”„λ΅μ νΈ μƒμ„±**

* WinUI 3 Blank App(C++/WinRT) μ„ νƒ
* μ΄λ¦„: **BgLabelControlApp**

### β‘΅ **ν…ν”λ¦Ώ μ»¨νΈλ΅¤ μ¶”κ°€**

ν”„λ΅μ νΈ β†’ **Add β†’ New Item β†’ Custom Control (WinUI)**
β†’ μ»¨νΈλ΅¤ μ΄λ¦„: **BgLabelControl**

μ΄λ¬λ©΄ 3κ°μ νμΌμ΄ μλ™ μƒμ„±λ¨:

| νμΌ                     | μ—­ν•                                  |
| ---------------------- | ---------------------------------- |
| **BgLabelControl.idl** | λ°νƒ€μ„ ν΄λμ¤ μ •μ (μ†μ„±/λ©”μ„λ“ μ„ μ–Έ)             |
| **BgLabelControl.h**   | μ»¨νΈλ΅¤μ C++ ν—¤λ” (DP/μ†μ„± μ ‘κ·Όμ μ •μ)         |
| **BgLabelControl.cpp** | μ»¨νΈλ΅¤ λ™μ‘ κµ¬ν„(DependencyProperty λ“±λ΅ λ“±) |

---

# 3. β” μ»¨νΈλ΅¤ λ‚΄λ¶€ κµ¬ν„ κ°λ…

### ν…ν”λ¦Ώ μ»¨νΈλ΅¤μ ν•µμ‹¬ κΈ°λ¥μ€ λ‹¤μ 3κ°

---

## **β‘  DependencyProperty (DP) μ •μ**

μ»¨νΈλ΅¤μ— λ°”μΈλ”© κ°€λ¥ν• μ†μ„±μ„ μ κ³µν•κΈ° μ„ν•΄ DPλ¥Ό μ‚¬μ©ν•¨.

μμ μ—μ„λ” λ¬Έμμ—΄ DP **Label** ν•λ‚ κµ¬ν„:

* μ •μ  DependencyProperty μ„ μ–Έ
* μΈμ¤ν„΄μ¤ μ†μ„± `String Label { get; set; }` μ •μ
* OnLabelChanged μ½λ°±(μµμ…)

---

## **β‘΅ Control κΈ°λ³Έ μ¤νƒ€μΌ μ§€μ • (Generic.xaml)**

ν…ν”λ¦Ώ μ»¨νΈλ΅¤μ€ **λ°λ“μ‹ κΈ°λ³Έ μ¤νƒ€μΌ/ν…ν”λ¦Ώμ΄ μμ–΄μ•Ό ν•¨**.

ν΄λ” κµ¬μ΅° ν•„μ:

```
Themes/Generic.xaml
```

μ—¬κΈ°μ„ μ»¨νΈλ΅¤μ κΈ°λ³Έ μ™Έν•μ„ XAMLλ΅ μ •μν•¨:

μ:

* 100Γ—100 λΉ¨κ°„ λ°°κ²½ μ‚¬κ°ν•
* κ°€μ΄λ° TextBlock
* Text="{TemplateBinding Label}"
* Background="{TemplateBinding Background}"

μ¦‰, **μ»¨νΈλ΅¤μ λ¨μ–‘μ€ XAML Template λ΅ κ²°μ •**λ¨.

---

## **β‘Ά MainWindowμ—μ„ μ»¨νΈλ΅¤ μ‚¬μ©**

XAMLμ—μ„ λ‹¤μμ²λΌ μ¨μ£Όλ©΄ λ¨:

```xml
<local:BgLabelControl Background="Red" Label="Hello, World!"/>
```

ν—¤λ” νμΌμ—μ„ include ν•„μ”:

```cpp
#include "BgLabelControl.h"
```

---

# 4. β” μ „μ²΄ κ°λ… νλ¦„ ν•λμ— λ³΄κΈ°

### **1) idl**

* μ»¨νΈλ΅¤ μ΄λ¦„, μ†μ„± μ •μ
* WinRT λ°νƒ€μ„ ν΄λμ¤ μƒμ„± κΈ°λ°

### **2) h**

* μ†μ„± getter/setter
* DependencyProperty λ“±λ΅ λ³€μ μ„ μ–Έ
* DefaultStyleKey μ„¤μ • (ν…ν”λ¦Ώ μ μ©)

### **3) cpp**

* μ‹¤μ  DependencyProperty λ“±λ΅
* OnLabelChanged μ½λ°± κµ¬ν„

### **4) Themes/Generic.xaml**

* μ»¨νΈλ΅¤ κΈ°λ³Έ UI ν…ν”λ¦Ώ (μ™Έν• κ·μ •)

### **5) ν™”λ©΄(XAML)μ—μ„ μ»¨νΈλ΅¤ μ‚¬μ©**

* μΌλ° XAML μ»¨νΈλ΅¤μ²λΌ λ°”λ΅ μ‚¬μ© κ°€λ¥

---

# 5. β” μµμΆ…μ μΌλ΅ λ§λ“¤κ² λλ” κ²ƒ

μ™„μ„±λ BgLabelControlμ€

> β€Background μƒ‰μƒ + Label λ¬Έμμ—΄μ„ ν‘μ‹ν•λ” μ •μ‚¬κ°ν• μ»¨νΈλ΅¤β€

μ¦‰, λ‹Ήμ‹ μ μ•±μ—μ„ λ‹¤μμ²λΌ λ³΄μ„:

* μ‚¬κ°ν•(λ°°κ²½μƒ‰μ€ Background λ°”μΈλ”©)
* κ°€μ΄λ° κΈ€μ(Label λ°”μΈλ”©)

---

# π“ μ”μ•½ ν‚¤ν¬μΈνΈ (3μ¤„)

1. **ν…ν”λ¦Ώ μ»¨νΈλ΅¤ = Control μƒμ† + DependencyProperty + ν…ν”λ¦Ώ(Generic.xaml)**
2. **μ™Έν•μ€ Generic.xaml**, λ™μ‘/μ†μ„±μ€ **C++/WinRT μ½”λ“(idl/h/cpp)** λ΅ κµ¬μ„±
3. λ¨λ“  μ»¨νΈλ΅¤μ€ XAMLμ—μ„ **<local:BgLabelControl β€¦/>** λ΅ λ°”λ΅ μ‚¬μ© κ°€λ¥

